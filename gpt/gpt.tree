#!/bin/bash

TARGET_DIRECTORY="$1"
if [[ ! -d "${TARGET_DIRECTORY}" || -z "${TARGET_DIRECTORY}" ]]
then
    echo "ERROR: The target directory does not exist"
    exit 1
fi

echo ""
echo "# Directory tree: ${TARGET_DIRECTORY}"
echo ""
find streamer_agent  -print | sed -e 's;[^/]*/;|____;g;s;____|; |;g' | grep -v pyc | grep -v __init__ | grep -v node_modules

FILES=$(find "$TARGET_DIRECTORY" -type f | grep -v __pycache__ | grep -v .pyc | grep -v __init__ | grep -v node_modules)

for FILE in $FILES
do
    echo ""
    echo "# File: ${FILE}"
    echo ""
    cat "$FILE"
done
